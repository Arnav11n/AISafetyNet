"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.uploadSocialMediaLink = uploadSocialMediaLink;
const errors_1 = require("../errors");
const url_1 = require("../utils/url");
const constants_1 = require("../core/constants");
/**
 * Send a social media post to the API for analysis
 * @param client HTTP client
 * @param options Upload options
 * @returns Upload result with request and media IDs
 */
async function uploadSocialMediaLink(client, options) {
    // Check if the link is a valid URL.
    if (!(0, url_1.testUrl)(options.socialLink)) {
        throw new errors_1.RealityDefenderError(`Invalid social media link: ${options.socialLink}`, 'invalid_request');
    }
    const result = await client.post(constants_1.API_PATHS.SOCIAL_MEDIA, options);
    if (!result.requestId) {
        throw new errors_1.RealityDefenderError('Invalid response from API - missing requestId', 'server_error');
    }
    // Return result for tracking
    return {
        requestId: result.requestId,
    };
}
